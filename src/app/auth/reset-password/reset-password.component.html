<!-- <!-- <div class="reset-password-container">
  <h2>Restablecer contraseña</h2>
  
  <div *ngIf="message" class="alert alert-success">
    {{ message }}
  </div>
  
  <div *ngIf="error" class="alert alert-danger">
    {{ error }}
  </div>

  <!-- Paso 1: Verificación de código (si hay email) 
  <div *ngIf="email && !isCodeVerified" class="verification-step">
    <p>Hemos enviado un código de verificación a <strong>{{ email }}</strong></p>
    <p *ngIf="timeLeft > 0">El código expira en: {{ timeLeft }} segundos</p>
    <p *ngIf="timeLeft <= 0" class="text-warning">El código ha expirado. Solicita uno nuevo.</p>

    <div class="form-group">
      <label for="verificationCode">Código de verificación</label>
      <input 
        type="text" 
        id="verificationCode" 
        [(ngModel)]="verificationCode" 
        placeholder="123456"
        maxlength="6"
      >
    </div>

    <button (click)="verifyCode()" [disabled]="isLoading">
      {{ isLoading ? 'Verificando...' : 'Verificar Código' }}
    </button>
  </div>

  <!-- Paso 2: Cambio de contraseña 
  <div *ngIf="isCodeVerified" class="password-change-step">
    <h3>Crea una nueva contraseña</h3>
    
    <div class="form-group">
      <label for="newPassword">Nueva contraseña</label>
      <input 
        type="password" 
        id="newPassword" 
        [(ngModel)]="newPassword" 
        placeholder="Nueva contraseña"
      >
    </div>

    <div class="form-group">
      <label for="confirmPassword">Confirmar nueva contraseña</label>
      <input 
        type="password" 
        id="confirmPassword" 
        [(ngModel)]="confirmPassword" 
        placeholder="Confirmar nueva contraseña"
      >
    </div>

    <button (click)="resetPassword()" [disabled]="isLoading">
      {{ isLoading ? 'Procesando...' : 'Restablecer contraseña' }}
    </button>
  </div>
</div> -->

<!-- <div class="reset-password-container">
  <h2>Restablecer contraseña</h2>

  <!-- Verificación de código 
  <div *ngIf="!isCodeVerified">
    <p>Ingresa el código de verificación que enviamos a <strong>{{ email }}</strong>.</p>
    <div class="form-group">
      <label for="verificationCode">Código de verificación</label>
      <input id="verificationCode" type="text" [(ngModel)]="verificationCode" maxlength="6">
    </div>
    <button (click)="verifyCode()" [disabled]="isLoading">
      {{ isLoading ? 'Verificando...' : 'Verificar código' }}
    </button>
  </div>

  <!-- Cambio de contraseña 
  <div *ngIf="isCodeVerified">
    <div class="form-group">
      <label for="newPassword">Nueva contraseña</label>
      <input id="newPassword" type="password" [(ngModel)]="newPassword">
    </div>
    <div class="form-group">
      <label for="confirmPassword">Confirmar nueva contraseña</label>
      <input id="confirmPassword" type="password" [(ngModel)]="confirmPassword">
    </div>
    <button (click)="resetPassword()" [disabled]="isLoading">
      {{ isLoading ? 'Procesando...' : 'Restablecer contraseña' }}
    </button>
  </div>
</div> -->

<div class="reset-password-container">
  <h2>Restablecer contraseña</h2>

<!-- Paso 1 -->
<div *ngIf="email && !isCodeVerified">
  <p>Hemos enviado un código de verificación a <strong>{{ email }}</strong></p>
  <p *ngIf="timeLeft > 0">Código expira en: {{ timeLeft }} segundos</p>
  <p *ngIf="timeLeft <= 0" class="text-warning">El código ha expirado. Solicita uno nuevo.</p>

  <div class="form-group">
    <label for="verificationCode">Código de verificación</label>
    <input id="verificationCode" type="text" [(ngModel)]="verificationCode" maxlength="6" placeholder="123456" />
  </div>

  <button (click)="verifyCode()" [disabled]="isLoading">
    {{ isLoading ? 'Verificando...' : 'Verificar código' }}
  </button>
  </div>

  <!-- Paso 2: Nueva contraseña -->
  <div *ngIf="isCodeVerified">
    <h3>Crear nueva contraseña</h3>

    <div class="form-group">
      <label for="newPassword">Nueva contraseña</label>
      <input type="password" id="newPassword" [(ngModel)]="newPassword">
    </div>

    <div class="form-group">
      <label for="confirmPassword">Confirmar nueva contraseña</label>
      <input type="password" id="confirmPassword" [(ngModel)]="confirmPassword">
    </div>

    <button (click)="resetPassword()" [disabled]="isLoading">
      {{ isLoading ? 'Procesando...' : 'Restablecer contraseña' }}
    </button>
  </div>
</div>

